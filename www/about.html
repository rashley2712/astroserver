<html>
    <head>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-52663594-2"></script>
        <script language="javascript" type="text/javascript" src="astro.js-master/astro.js"></script>
		<script language="javascript" type="text/javascript" src="astro.js-master/astro.constants.js"></script>
		<script language="javascript" type="text/javascript" src="astro.js-master/astro.dates.js"></script>
		<script language="javascript" type="text/javascript" src="astro.js-master/astro.ephem.js"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
        
          gtag('config', 'UA-52663594-2');
        </script>
        
        <title>AstroFarm, La Palma</title>
        <link rel="stylesheet" type="text/css" href="styles.css"/>
     	
        <script src="astrotools.js"></script>
        
        <script language="Javascript">
            function getJSON(url, callback) {
                var xhr = new XMLHttpRequest();
                    xhr.open('GET', url, true);
                    xhr.responseType = 'json';
                    xhr.onload = function() {
                        var status = xhr.status;
                        if (status === 200) {
                            callback(null, xhr.response);
                        } else {
                            callback(status, xhr.response);
                        }
                    };
                xhr.send();
            };    

            // Global variables
            var currentTime = new Date();
            var secondsTimerId = null;
            var minutesTimerId = null;
            var constellation = null;
            var clockAngle = 0;
            var LMSiderealTime; 
            console.log(currentTime);
            
            // Call a function only when the page is fully loaded.
		    document.addEventListener('readystatechange', event => {
		        if (event.target.readyState === "complete") {
			        onLoad();
		        }
		    });
  
              
            function onLoad() {
                console.log("The page has loaded....");
                getJSON('info', info);
                getJSON('ursaminor.json', starsLoaded);
                updateTime();
                secondsTimerId = setInterval(updateTime, 1000);
                minutesTimerId = setInterval(updateClock, 60*1000);
                infoTimerId = setInterval(updateInfo, 10*60*1000);
                var canvas = document.getElementById('canvasContainer');
                var canvasWidth = document.getElementById('canvas').width;
                canvas.style.top = 50;
                canvas.style.left = 400;
            }

            window.onresize = function() {
                var canvas = document.getElementById('canvasContainer');
                var canvasWidth = document.getElementById('canvas').width;
                canvas.style.top = 50;
                canvas.style.left = 400;
            }

           
       
            function info(err, data) {
                console.log(data);
                document.getElementById("hostname").innerText = data.system.hostname;
                document.getElementById("uptime").innerText = "uptime: " + data.system.uptime + "s";
                document.getElementById("moonphase").innerText = decimalPlacesString(data.moon.illuminated, 2) + "  " + data.moon.mode;
                document.getElementById("etwilight").innerText = data.sun.etwilight;
                document.getElementById("mtwilight").innerText = data.sun.mtwilight;
                document.getElementById("sunset").innerText = data.sun.sunset;
                document.getElementById("sunrise").innerText = data.sun.sunrise;
                document.getElementById('currentUTC').innerText = formatUTCTime(currentTime);
            }

            function updateTime() {
                currentTime = new Date();
                LMSiderealTime = astrojs.dates.getLST(currentTime, 342.1184);
                // console.log(LMSiderealTime);
                // console.log(timeDecimalToHMS(LMSiderealTime));
                document.getElementById('currentUTC').innerText = formatUTCTime(currentTime);
                document.getElementById('sidereal').innerText = "Local Sidereal Time " + timeDecimalToHMS(LMSiderealTime);
            }

            function updateClock() {
                clockAngle = 360 - LMSiderealTime*15;
                console.log("Redrawing siderial clock");
                drawClock();
            }

            function updateInfo() {
                getJSON('info', info);
            }

            function starsLoaded(err, data) {
                if (err!=null) { console.log(err);}
                console.log("Constellation", data);
                constellation = data;
                updateClock();
            }

            function drawClock() {
                const quiet = true;
                var canvas = document.getElementById("canvas");
                const size = canvas.width/2/(90-70);
                
                var ctx = canvas.getContext("2d");
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                // Draw some grid lines first
                const ox = canvas.width/2;
                const oy = canvas.height/2;
                for (var ra=0; ra<24; ra=ra+1) {
                    angle = clockAngle + ra*15;
                    r = size*50;
                    var x = canvas.width/2 + r * Math.sin(radians(angle));
                    var y = canvas.height/2 - r * Math.cos(radians(angle));
                    ctx.beginPath();
                    ctx.moveTo(ox, oy);
                    ctx.lineTo(x, y);
                    ctx.strokeStyle='#0000aa';
                    ctx.stroke();
                    
                }
                // Draw stronger grid lines 
                for (var ra=0; ra<24; ra=ra+6) {
                    angle = clockAngle + ra*15;
                    r = size*50;
                    var x = canvas.width/2 + r * Math.sin(radians(angle));
                    var y = canvas.height/2 - r * Math.cos(radians(angle));
                    ctx.beginPath();
                    ctx.moveTo(ox, oy);
                    ctx.lineTo(x, y);
                    ctx.strokeStyle='#0000ff';
                    ctx.stroke();
                    
                }
                // Draw the grid circles
                for (var dec=85; dec>60; dec=dec-5) {
                    radius = Math.sin(radians(dec)) * size*(90-dec);
                    ctx.beginPath();
                    ctx.arc(ox, oy, radius, 0, 2 * Math.PI);
                    ctx.strokeStyle='#0000aa';
                    ctx.stroke();
                    
                }
                //var cross = document.getElementById('cross')
                //ctx.drawImage(cross, canvas.width/2 - cross.width/2, canvas.height/2 - cross.height/2);
                var stars = constellation.stars;
                var star = document.getElementById('star')
                for (s of stars) {
                    if (!quiet) console.log(s.name, s.coordinates.RA, s.coordinates.DEC);
                    var coords = s.coordinates.RA + " " +  s.coordinates.DEC;
                    var result = fromSexagesimalString(coords);
                    if (!quiet) console.log(result);
                    var r = Math.sin(radians(result.dec)) * size * (90 - result.dec);   // The first term is to correct for the projection on to a flat plane
                    var angle = clockAngle + result.ra;
                    var x = canvas.width/2 + r * Math.sin(radians(angle));
                    var y = canvas.height/2 - r * Math.cos(radians(angle));
                    if (!quiet) console.log(x, y)
                    
                    ctx.drawImage(star, x - star.width/2, y - star.height/2);
                }
            }

      
  

</script>
</head>

<body>
    <a href="/"><img src="astrofarmlogo.png" width="300" style="position:absolute; top:0; left:0;"></a>
    <div id="menu" style="position:absolute; top:10; left:320; z-index:1">
        <table border='1'>
            <tr>
                <td id="menuCell" onclick='window.location="index.html";'>Home</td>
                <td id="menuCell" onclick='window.location="meteolog.html";'>Meteo</td>
                <td id="menuCell" onclick='window.location="about.html";'>About us</td>
                <td id="menuCell" onclick='window.location="hosting.html";'>Telescope hosting</td>
                <td id="menuCell" onclick='window.location="remote.html";'>Remote observing</td>
                <td id="menuCell" onclick='window.location="stargazing.html";'>Stargazing</td>
            </tr>
        </table>
    </div>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
	<h1>About us</h1>
    <table>
    <tr>
        <td id="longtext">
            <b>Ovidiu Vaduvescu</b> and <b>Richard Ashley</b> are employees at the <a href="http://www.ing.iac.es">Isaac Newton Group</a> of telescopes on La Palma and work at the <a href="http://www.ing.iac.es/astronomy/telescopes/wht/">William Herschel</a> and the <a href="http://www.ing.iac.es/astronomy/telescopes/int/">Isaac Newton</a> telescopes regularly. Both are experienced professional astronomers who share a love for the field and are keen backyard astronomers too.<br/>
            <b>AstroFarm S.L.</b> was created in 2020 as a business to bring astro-tourism to La Palma and offer observing and hosting for all people interested in looking at the stars, whether they are professionals, students or hobbyists. 
        </td>
    </tr>
    <tr>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td id="longtext">
            <img src="images/cosmos.png" align="left" width="100px"><b>Richard Ashley</b> was introduced to Carl Sagan's COSMOS series when he was 9 years old, being given special permission to stay up late to watch it. This started his love for astronomy. He studied Physics and Astronomy at the University of Cape Town<img src="images/SAAO1m.png" align="right" width="120px"> in the 1990's and spent many nights observing at the South African Astronomical Observatory on the 20, 30 and 40" telescopes with photomultiplier photometry (rather than CCD). He was supervised by Don Kurtz, Darragh O'Donoghue and Brian Warner.
            <br/>
            He converted to Electrical Engineering while still in Cape Town and then moved to London to work as a technical consultant in the <em>.com</em> world. He spent 15 years working at <img style="vertical-align:middle;" src="images/google.png" width="60px"> and is still a part-time consultant there.
            <br/><br/>
            <img src="images/cv.png" align="left" width="120px">Returning to astronomy in 2015, he undertook first a Masters and then a PhD in Astrophysics at the University of Warwick, supervised by Tom Marsh and Boris Gänsicke. His research is mainly focused on the evolution of compact binary stars with a particular interest in cataclysmic variables and polars.
            <br/><br/>
            In 2015 he took a student internship at the Isaac Newton Group and became a permanent member of staff in 2018. He is a Telescope Operator at the 4.2m William Herschel Telescope.<br><br>
            <br/><br/>
            <b>Recent publications:</b>
            <ul id="longtext">
                <li>
                    <a href="https://ui.adsabs.harvard.edu/abs/2020MNRAS.tmp.2574A/abstract">V1460 Her: A fast spinning white dwarf accreting from an evolved donor star</a> Monthly Notices of the Royal Astronomical Society, September 2020.
                </li>
                <li>
                    <a href="https://ui.adsabs.harvard.edu/abs/2019MNRAS.484.5362A/abstract">Evidence for bimodal orbital separations of white dwarf-red dwarf binary stars</a> Monthly Notices of the Royal Astronomical Society, Volume 484, Issue 4, p.5362-5376.
                </li>
            </ul>
        
        </td>
    </tr>   
    </table>
	
</body>
</html>
